{"meta":{"title":"CQH.CH","subtitle":"Capital of Quant and Hedge","description":"","author":"Ande.Studio","url":"http://www.cqh.ch","root":"/"},"pages":[{"title":"about","date":"2019-12-24T04:45:44.000Z","updated":"2019-12-25T03:08:37.758Z","comments":true,"path":"about/index.html","permalink":"http://www.cqh.ch/about/index.html","excerpt":"","text":"不是医师不是律师不是"},{"title":"Categories","date":"2019-12-29T07:13:22.018Z","updated":"2019-12-29T07:13:22.018Z","comments":true,"path":"categories/index.html","permalink":"http://www.cqh.ch/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-12-24T04:45:12.000Z","updated":"2019-12-24T06:11:13.417Z","comments":true,"path":"tags/index.html","permalink":"http://www.cqh.ch/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Linux(manjaro/archlinux)下nodejs(npm) + hexo环境搭建","slug":"2019/nodejs-hexo","date":"2019-12-23T07:53:50.000Z","updated":"2020-01-01T13:31:07.268Z","comments":true,"path":"2019/nodejs-hexo.html","link":"","permalink":"http://www.cqh.ch/2019/nodejs-hexo.html","excerpt":"","text":"背景因为最近穷成负翁，没钱给主机续费，个人网站关闭了一段时间。原本想用路由器的DDNS做内网渗透，这需要卡片电脑打造一台功率低7×24在线的低功率主机，虽有成就感但总感觉绕了很远的弯路。回想曾经用过的gitpages，感觉基本能满足我目前的需求，决定先采用hexo搭建，需要用到动态编程的时候，用跨域的ajax实现就好。我的Linux系统环境是manjaro-xfce-18.0.4-stable-x86_64，这篇文章主要是记录Linux(manjaro/archlinux)下nodejs(npm) + hexo环境搭建。 用pacman直接安装nodejs环境依赖。1sudo pacman -S nodejs npm2#虽能顺利安装，但命令行键入node -v或npm -v时总是报错：3node: symbol lookup error: node: undefined symbol: nghttp2_option_set_max_outbound_ack 详见查阅资料说是编译的问题，而我不懂编译，只能放弃此道。 nodejs.org网站下载Linux Binaries (x64)包打开链接https://nodejs.org/en/download/下载Linux Binaries (x64)本地解压后，复制到你的安装目录(比如/app/或/usr/local/)然后建立node与npm的软链接命令行操作如下 1wget https:&#x2F;&#x2F;nodejs.org&#x2F;dist&#x2F;v12.14.0&#x2F;node-v12.14.0-linux-x64.tar.xz #下载2tar xf node-v12.14.0-linux-x64.tar.xz #解压3sudo mv node-v10.16.0-linux-x64 &#x2F;app&#x2F;node-v10.16.0-linux-x64 #移动4sudo ln -s &#x2F;app&#x2F;node-v12.13.1-linux-x64&#x2F;bin&#x2F;node &#x2F;usr&#x2F;local&#x2F;bin&#x2F;node #建立软链接5sudo ln -s &#x2F;app&#x2F;node-v12.13.1-linux-x64&#x2F;bin&#x2F;npm &#x2F;usr&#x2F;local&#x2F;bin&#x2F;npm 命令行键入node -v或npm -v会出现版本号说明nodejs环境搭建成功。 安装hexo1#在完成了nodejs环境搭建后，npm安装hexo并为其建立软链接即可。2npm install hexo-cli -g3sudo ln -s &#x2F;app&#x2F;node-v12.13.1-linux-x64&#x2F;lib&#x2F;node_modules&#x2F;hexo-cli&#x2F;bin&#x2F;hexo &#x2F;usr&#x2F;local&#x2F;bin&#x2F;hexo 初始化hexo1# 初始化一个hexo项目，比如blog2hexo init blog3# 启动hexo服务4cd blog5hexo s 浏览器打开 至此，hexo环境搭建完成。","categories":[{"name":"hexo","slug":"hexo","permalink":"http://www.cqh.ch/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://www.cqh.ch/tags/hexo/"},{"name":"nodejs","slug":"nodejs","permalink":"http://www.cqh.ch/tags/nodejs/"},{"name":"npm","slug":"npm","permalink":"http://www.cqh.ch/tags/npm/"},{"name":"manjaro","slug":"manjaro","permalink":"http://www.cqh.ch/tags/manjaro/"},{"name":"javascript","slug":"javascript","permalink":"http://www.cqh.ch/tags/javascript/"}]},{"title":"ValidationError: 'null' is not a string!","slug":"2019/null-is-not-a-string","date":"2019-12-23T07:29:46.000Z","updated":"2020-01-01T07:31:46.474Z","comments":true,"path":"2019/null-is-not-a-string.html","link":"","permalink":"http://www.cqh.ch/2019/null-is-not-a-string.html","excerpt":"","text":"问题hexo报错ValidationError: ‘null’ is not a string! 原因有某些属性没有填写，比如author属性，tag属性，categories属性等，导致该属性是空的，即null，所以报错。 解决将空属性删除","categories":[{"name":"hexo","slug":"hexo","permalink":"http://www.cqh.ch/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://www.cqh.ch/tags/hexo/"},{"name":"debug","slug":"debug","permalink":"http://www.cqh.ch/tags/debug/"}]},{"title":"template-render-error","slug":"2019/template-render-error","date":"2019-12-23T06:26:38.000Z","updated":"2020-01-01T08:44:48.491Z","comments":true,"path":"2019/template-render-error.html","link":"","permalink":"http://www.cqh.ch/2019/template-render-error.html","excerpt":"","text":"Template render error问题hexo g 或 hexo s时报错如下 1$ hexo s2INFO Start processing3FATAL Something&#39;s wrong. Maybe you can find the solution here: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;troubleshooting.html4Template render error: (unknown path)5 parseIf: expected elif, else, or endif, got end of file67$ hexo g8INFO Start processing9FATAL Something&#39;s wrong. Maybe you can find the solution here: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;troubleshooting.html10Template render error: (unknown path)11 Error: Block &quot;title&quot; defined more than once. 原因模板参数传递错误，页面中含有的错误的引用，或引用未被代码块包含，解析会出问题。 解决仔细检查引用的参数，确保没有错误或多次定义。如果是文章中演示，应将其放入代码段中。","categories":[{"name":"hexo","slug":"hexo","permalink":"http://www.cqh.ch/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://www.cqh.ch/tags/hexo/"},{"name":"debug","slug":"debug","permalink":"http://www.cqh.ch/tags/debug/"}]},{"title":"革新记之工作日程管理-考勤记录","slug":"2019/worktime-attendance","date":"2019-12-01T17:20:36.000Z","updated":"2020-01-01T13:35:04.441Z","comments":true,"path":"2019/worktime-attendance.html","link":"","permalink":"http://www.cqh.ch/2019/worktime-attendance.html","excerpt":"","text":"革新记之工作日程管理-考勤记录我真的很不喜欢无意义的简单重复，如果一件事情会重复，那么就应该考虑自动化的可能。这篇文章我要捣鼓的是考勤的问题。 考勤的流程是：月初排班——每日考勤登记——月末考勤统计。 我觉得这是一件很没有技术含量的事情，但是一旦出错，那绝对是严重影响生活质量的大事情。 我的设想是这样子的：第一，既然有排班表，那么可以由排班表生成考勤登记表和考勤统计表；第二，考勤登记表和考勤统计表完全可以整合成一个东西；第三，可以根据考勤统计表自动对比考勤机数据（这一步不涉及我的工作，暂不表）。第四，数据的共享及自动化将带来高效办公。 首先，要先编出排班表。因为上次研究的算法漫步——排班算法设计还没完成，我决定先使用办公表格实现我想要的东西，并且不使用宏编程而是单纯的公式，因为单位的电脑可能不支持宏。 先讲述下排班的思路设计：主班排1人，值班排1人，休假排1人，补休排1人（昨日值班），其余人（若有）副班。因此，实际要编排的是主班、值班和休假的人员。其他可以根据已有信息运算出来，比如：补休的C7=B5,填充时注意首尾就可以了;有点挑战的是副班的运算，我的思路将所有人定义成一个字符串，然后用SUBSTITUTE()公式将主班、值班、休假、补休替换成空字符，即可得到B8=SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE($A$2,LEFT(B5,1),””),B4,””),B6,””),B7,””)。 然后，要根据排班表生成比较方便比对的信息串，我的思路是用&amp;连字符将主班、值班、休假、补休、副班、日期拼接成一个字符串，至于为什么按这种顺序拼接后面会讲到。这些信息串最好按阵列放置，以便下一步引用，如图： 再者，信息的加工提取。先将信息阵列投射成信息串单列表，然后就可以做信息处理了：日期C84=INT(MID(B84,6,2));考勤状态的确定略显复杂，需要用到FIND()查找组合多重IF判断。思路是这样的：用FIND()得到信息串的索引，若为1则是主班标√，若为2则是值班标□，若为3则是休假标△，若为4则为补休标+，其他是副班标√。D84=IF(FIND($D$83,B84,1)=1,”√”, IF(FIND($D$83,B84,1)=2,”□”, IF(FIND($D$83,B84,1)=3,”△”, IF(FIND($D$83,B84,1)=4,”+”,”√”)))) 最后，将上步得到的信息按日期升序，转置变成横向，再适当编辑下，即可得到考勤记录表。 至此，由排班表生存考勤记录表的工作基本完成。之所以花时间去做出于两点原因： 其一是因为实现数据间的共享，可以省却很多不必要的工作。在有排班表的前提下，只要写个宏脚本，那么就可以自动生成一份考勤记录。每日只要在这份表上登记，月末自然就完成了统计。而有预排班做对照，考勤出现错误的情况能很好的比对出来。 其二是有过仅仅忘了打卡就白送一天的加班（没错双倍工资的那种）的经历，让我意识到，唯有用按部就班的程序方能对抗机械的制度及人。但仅仅确保考勤的正确是远远不够的，因为你无法确保和考勤机的数据是一致的，这才是最致命的。在尝试过让单位公开考勤机数据以便提前备注而未果之后，我能做到的确保自己无论如何不要忘记打卡，因此决定重启GTD体系，用日历和任务列表确保单位无法再因考勤问题扣我一分钱。是的，这个项目到这里并没有结束，下一步，我要做的是由排班表生成工作日历和任务列表。","categories":[{"name":"自动化","slug":"自动化","permalink":"http://www.cqh.ch/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/"}],"tags":[{"name":"革新","slug":"革新","permalink":"http://www.cqh.ch/tags/%E9%9D%A9%E6%96%B0/"},{"name":"办公","slug":"办公","permalink":"http://www.cqh.ch/tags/%E5%8A%9E%E5%85%AC/"},{"name":"自动化","slug":"自动化","permalink":"http://www.cqh.ch/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"}]},{"title":"LAKIA——SEC_ERROR_UNKNOWN_ISSUER + ssl.SSLCertVerificationError + urllib3.exceptions.MaxRetryError + requests.exceptions.SSLError","slug":"2019/sllerr","date":"2019-10-30T13:06:00.000Z","updated":"2020-01-01T13:38:53.518Z","comments":true,"path":"2019/sllerr.html","link":"","permalink":"http://www.cqh.ch/2019/sllerr.html","excerpt":"","text":"2019年10月29日，我定向爬取金交所网站的爬虫出了故障，抛出ssl.SSLCertVerificationError + urllib3.exceptions.MaxRetryError + requests.exceptions.SSLError错误。金交所的数据对我的量化对冲研究至关重要，所以有了这篇Debug的文章。 用FireFox打开金交所的网站，页面如图： Advanced，Error code: SEC_ERROR_UNKNOWN_ISSUER Who care…Accept the Risk Continue Webpage works well unless you Remove Exception。 我并不关心金交所的ssl证书是否安全，我只关心中国贵金属的交易数据，所以我选择了无视。 回到爬虫上来，三个报错具体如下： 1ssl.SSLCertVerificationError: \\[SSL: CERTIFICATE\\_VERIFY\\_FAILED\\] certificate verify failed: unable to get local issuer certificate (_ssl.c:1076)23urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host&#x3D;&#39;www.sge.com.cn&#39;, port&#x3D;443): Max retries exceeded with url: &#x2F;graph&#x2F;quotations (Caused by SSLError(SSLCertVerificationError(1, &#39;\\[SSL: CERTIFICATE\\_VERIFY\\_FAILED\\] certificate verify failed: unable to get local issuer certificate (_ssl.c:1076)&#39;)))45requests.exceptions.SSLError: HTTPSConnectionPool(host&#x3D;&#39;www.sge.com.cn&#39;, port&#x3D;443): Max retries exceeded with url: &#x2F;graph&#x2F;quotations (Caused by SSLError(SSLCertVerificationError(1, &#39;\\[SSL: CERTIFICATE\\_VERIFY\\_FAILED\\] certificate verify failed: unable to get local issuer certificate (_ssl.c:1076)&#39;))) 后两个错误Caused by SSLError(SSLCertVerificationError)，因此先来解决第一个SSLCertVerificationError问题。 requests发生https请求时默认启用SSL验证，如果无法验证SSL证书，将会引发SSLError。故在发送请求时设置verify=False就好。 1response &#x3D; requests.post(url, headers&#x3D;headers, cookies&#x3D;cookies, data&#x3D;data, verify&#x3D;False)2将验证关闭之后，程序可以运行，但会抛出如下警告： 3&#x2F;usr&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;urllib3&#x2F;connectionpool.py:851: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https:&#x2F;&#x2F;urllib3.readthedocs.io&#x2F;en&#x2F;latest&#x2F;advanced-usage.html#ssl-warnings 4InsecureRequestWarning) 这也很烦人，知道这是一个不安全的请求，不用一再的提醒，禁用安全提示就好。 1import urllib32\\# 禁用安全请求警告3urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning) 至此，问题解决，谨以此记。","categories":[{"name":"Python","slug":"Python","permalink":"http://www.cqh.ch/categories/Python/"}],"tags":[{"name":"debug","slug":"debug","permalink":"http://www.cqh.ch/tags/debug/"},{"name":"爬虫","slug":"爬虫","permalink":"http://www.cqh.ch/tags/%E7%88%AC%E8%99%AB/"},{"name":"Python","slug":"Python","permalink":"http://www.cqh.ch/tags/Python/"}]},{"title":"算法漫步-排班算法设计","slug":"2019/worktime-design","date":"2019-10-29T14:30:00.000Z","updated":"2020-01-01T13:38:57.245Z","comments":true,"path":"2019/worktime-design.html","link":"","permalink":"http://www.cqh.ch/2019/worktime-design.html","excerpt":"","text":"算法漫步-排班算法设计为什么要思考排班的算法设计？当然是因为排班需要用到啊！记得当初学C语言的时候，老师说如果一段代码你写两次，最好封装成一个函数。这个函数思想深深的影响了我，以至于我把它扩展成：如果一件事情要重复做，最好做出一个可以调用的功能模块。可同时也有个问题困扰着我，要写出这个算法最少起码得花上24个小时吧，而排一个班只需要0.5个小时，写代码的时间已然够我排4年的班了…看问题不能太狭隘，虽然这个算法我可能4个月都用不到，但还有很多人用得到，只要整体节省的时间超过了我付出的时间，对社会而言就是一种进步。带着这种想法，我挖下了这个坑。这篇文章是关于排班的算法设计，至于代码实现，那真的是个大坑——得慢慢填，我也不知道这个坑什么时候能填完……. 问题 假设医院某科室，三班轮倒，如何实现自动排班算法？ 建模 设日班为α（假设安排2人），中班为β（假设安排1人），夜班为γ（假设安排1人），休息为Δ（假设安排剩余人）。科室所有人设为全集合X=（ABCDEFGH），其中有些人（比如GH）不参与夜班γ，设为特殊人集合Z，正常人集合Y=X-Z。将其排入αβγΔ四种不同的状态，其实就是一个排列组合的问题。 实现 为方便解决这个问题，可以设计一种类似佛珠的闭环数据结构，假设该串佛珠有8个，一次只取4个相连的佛珠，排班就会变得如僧侣数佛珠一样。为平衡考虑，须将特殊人集合Z的元素均匀的插入到正常人集合Y中。 佛珠的数据结构如下： 接下来，让我们来数这串佛珠，也即是排班。 其中要注意的是夜班γ是最为特殊的，首先是因为排过夜班的第二天不会再参与排班，其次是某些怀孕、哺乳、大龄、新人或管理不会参与夜班。所以夜班γ必须优先考虑。 另外一点要注意的是，从哪开始的问题。第一天无所谓，但第二天的选择就会涉及公平的问题。最简单也最均衡的做法应该是：将第一天开始的佛珠（假设A第一天为夜班γ）移到最后，并将下一颗佛珠（则为B第二天为夜班γ）作为第二天的开始，如果遇到特殊的佛珠（如G或H）则轮空并选择下一颗，如此往复。具体如下： 从上可以看出，6轮为一循环（正常人集合Y的元素数），在一循环中，每人参与上班（αβγ）为3次，参与休息Δ为3次，实现了均衡。当然万恶的资本主义不会让人一年一半的时间（182.5天）都在休息，逐利的它会说你最多只能休104天，为此每天休息的不是4人。排假涉及人员的配置问题，若是安排过多人的休息意味人员的冗余将牵扯出裁员，这将会变得很严重，得先将人员配置的问题理顺才行。 假设一个遵纪守法的单位，实行8h×5d工作制，即职工每月可以休假8+天（年休104天），某部门不是实行双休而是轮休制，那么该部门应该配备多少人员呢？ 设最少人员配置为x，则有：104 * x ≥ 30 / x * 12 * 8+，x ≥ √30，即最少应配备6人方能符合法律规定。 设最优人员配置为y，每日必须的人员配置为z，则有261 * y ≤ 365 * z，y ≤ 1.4z。 回到我们一开始的模型上，每日必须排班z = 4，则最优配置y = 6人，排休2人最为合理。那么z =3时，y = 5吗？因为y ≥ x ≥ √30 &gt; 5，配置5人显然不合法。而要变得合法，显然是支付双倍工资购买职工的休息时间。但前提是职工自愿，因为不能强迫加班。 至此人员配置的问题基本理顺。 ）:未完待续 To be continued…","categories":[{"name":"自动化","slug":"自动化","permalink":"http://www.cqh.ch/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/"}],"tags":[{"name":"算法","slug":"算法","permalink":"http://www.cqh.ch/tags/%E7%AE%97%E6%B3%95/"},{"name":"自动化","slug":"自动化","permalink":"http://www.cqh.ch/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"}]},{"title":"药学漫步-一例卡前列素氨丁三醇不良反应(血氧下降)病例讨论","slug":"2019/carboprost","date":"2019-10-17T22:54:18.000Z","updated":"2020-01-01T10:33:30.591Z","comments":true,"path":"2019/carboprost.html","link":"","permalink":"http://www.cqh.ch/2019/carboprost.html","excerpt":"","text":"药学漫步-一例卡前列素氨丁三醇不良反应(血氧下降)病例讨论一）病历介绍 患者，女，25岁，孕5产1，2015年11月剖宫产1次，人工流产3次。停经37周，下腹阵痛2小时。于2019-09-11 12：00入院，入院查体：生命体征正常，心肺听诊无异常；专科情况：腹部隆起，下腹耻骨联合上可见一长约14cm纵形手术疤痕组织，疤痕处无压痛，子宫轮廓清楚，宫高29cm，腹围89cm，胎头先露，入盆，胎心音142次/分，律齐，可触及规律宫缩，持续20秒，间歇2-3分钟，消毒内诊：宫颈软，消失，宫口开3cm，头先露，S-2，可触及水囊，羊水性质不详。入院诊断：1、疤痕子宫（剖宫产史）2、孕5产1孕37周头位临产，因“疤痕子宫”入院后积极行术前准备，术中见羊水II°污染，吸净羊水，量约800ml， 12：55以左枕前位取出壹活男婴，脐带绕颈1圈， Apgar评分8-10分，体重3250g， 因胎盘粘连，行人工剥离胎盘，胎盘胎膜剥离完整、黄染， 子宫下段后壁胎盘剥离面渗血厉害，给予1号合成线“8”字缝合4针后见子宫下段无渗血，用1号合成线连续缝合子宫切口并反向加固，在缝子宫第一道时见从子宫下段涌出暗红血液，子宫下段收缩差，子宫下段菲薄，予以2-0合成线8字缝合子宫下段前壁2针后出血减少，此时术中出血共约500ml，予以欣母沛250ug宫体注射，子宫收缩明显好转，继续缝合子宫切口，快缝完子宫切口时产妇频繁咳嗽，无胸闷、气促、血氧血压均正常，子宫切口、针眼等处无渗血，尿液清亮，量约100ml,不排外羊水栓塞的可能，予以20mg地塞米松预防性用药，同时抽血查血常规、凝血四项，缝完子宫后麻醉师发现祛除面罩产妇血氧下降至90以下，最低82，重新戴上氧气面罩后血氧上升到90以上，电话通知急救小组到场。检查子宫双侧附件肉眼未见异常，生理盐水冲洗腹腔，清理腹腔干净，再次检查子宫切口缝合处无出血，尿液清亮。清点器械光边等无误，逐层关腹。手术经过顺利，术中出血约500ml，输液1500ml，尿量200ml，清亮。术后掏出阴道凝血块约200ml，清除凝血块后未见活动性出血，护理垫上有大量粪便。术后留手术室观察近1小时，产妇除诉宫缩痛外，未再出现咳嗽、无胸闷、气促等不适，脱离氧气面罩未输氧30分钟血氧都在90以上，血压维持在100-120mmHg/70-85mmHg，脉搏在100次/分左右，呼吸20次/分，双肺呼吸音清，未闻及干湿啰音，心率：100次/分，未闻及病理性杂音，腹部切口无渗血，子宫质硬，阴道无活动性出血，尿液清亮，术后急诊床旁心电图无明显异常。遂嘱安返病房休息。术中血常规结果回报与术前无明显差异，凝血四项无异常，生命体征正常，子宫复旧可，阴道流血少。术后逐日恢复，于2019-09-19拆线出院。 二）分析讨论 在分析之前，先介绍一下，不良反应的评价方法，即关联性评价①用药与不良反应/事件的出现有无合理的时间关系。②反应是否符合该药已知的不良反应类型。③停药或减量后，反应是否消失或减轻。④再次使用可疑药品是否再次出现同样反应/事件。⑤反应/事件是否可用并用药的作用、患者病情的进展、其他治疗的影响来解释。在不良反应分析的5个原则选项中，前四个选项都选择“是”，则关联性评价应选“肯定”；前四个选项中有3个选择“是”，则关联性评价应选“很可能”；前四个选项中有2个选择“是”，则关联性评价应选“可能”。 根据病历介绍以及医嘱查询，总结用药情况如下：硫酸镁4g + GS100ml ivgtt阿托品针0.5mg 遵医遵未给药益母草注射液 2ml 宫体注射卡前列素氨丁三醇0.25mg 宫体注射地塞米松注射液 20mg 给药方式不详 然后，说一下用药后反应。一为咳嗽，呼吸抑制，血氧低至82，根据表述是发生在快缝完子宫切口时，此前用药有硫酸镁，益母草，卡前列素氨丁三醇，三药已知都有呼吸系统的不良反应：硫酸镁通过镁离子抑制平滑肌钙离子的动作电位，肌肉兴奋性受抑制。可使宫缩频率减少，强度减弱，副作用就是呼吸也会同时受抑制，用药要监控呼吸不能低于16次/分钟。治疗早产的有效血镁浓度为2.1～2.9mmol/L，而出现呼吸抑制的浓度为5mmol/L。孕妇肾功能正常，静滴4g硫酸镁未能有效抑制宫缩，不太考虑其单独抑制了呼吸。卡前列素氨丁三醇说明书指出某些患者使用后，可引起短暂的气管收缩，较为少见（1/1000&lt;发生率&lt;1/100）。益母草没有详细相关文献和数据，可能在兴奋子宫平滑肌也会波及呼吸道。值得注意的是，患者后续仍给予 益母草注射液 2ml iv bid，未诉呼吸道症状，基本排除益母草的单独致因。综上，不能排除卡前列素氨丁三醇单独导致了互相抑制，同时考虑硫酸镁和益母草也有协同的影响。 二为胃肠道反应，术后清理时发现，三药已知也都有胃肠道反应：益母草没有详细相关文献和数据，胃肠道可能被兴奋了。患者后续用药，未诉消化道症状，基本排除益母草的单独致因。卡前列素氨丁三醇说明书明确指出其可刺激胃肠道平滑肌，呕吐和腹泻发生率约为2/3，故建议同时加用止吐剂和止泻剂。硫酸镁也有导泻作用，多发生大剂量（5～20g）口服在2～8h后，本例为静滴给药，故予排除。另外不能排除的是生理性失禁，孕妇12：00入院，12：55产出男婴，可能未排空肠胃，分娩时肠道受到压迫导致失禁。 综上，胃肠道反应考虑卡前列素氨丁三醇成因较大，不能排除益母草参与协同以及生理性原因。 除了益母草外，其他药物未再次给药，也不好评价反应的减弱和消失是因停药还是给予了激素导致。故此对于此例出现的呼吸抑制和腹泻，卡前列素氨丁三醇的关联性评价结果为“可能”。","categories":[{"name":"药学","slug":"药学","permalink":"http://www.cqh.ch/categories/%E8%8D%AF%E5%AD%A6/"}],"tags":[{"name":"临床药学","slug":"临床药学","permalink":"http://www.cqh.ch/tags/%E4%B8%B4%E5%BA%8A%E8%8D%AF%E5%AD%A6/"},{"name":"药学服务","slug":"药学服务","permalink":"http://www.cqh.ch/tags/%E8%8D%AF%E5%AD%A6%E6%9C%8D%E5%8A%A1/"},{"name":"病例讨论","slug":"病例讨论","permalink":"http://www.cqh.ch/tags/%E7%97%85%E4%BE%8B%E8%AE%A8%E8%AE%BA/"}]},{"title":"药学漫步-一例药源性低血钾的病例分析","slug":"2019/kcl","date":"2019-10-07T13:39:37.000Z","updated":"2020-01-01T10:45:49.061Z","comments":true,"path":"2019/kcl.html","link":"","permalink":"http://www.cqh.ch/2019/kcl.html","excerpt":"","text":"前言 钾是生命的必需离子，低血钾常出现心律失常、心室颤动，甚至猝死等严重不良后果，故及时发现、预防低血钾极为重要。很多药物可致血钾降低，临床药师在实际工作，对这类药物的监护应予以重点关注。本文通过分析一例药物性低血钾的病例，为低血钾的药学监护提供参考。 病史资料 患者男性，62岁，因咳嗽、咳痰、气紧20余天，于2018年5月30日入住我院呼吸科，病历号654973。患者于20余天前拆解老旧房屋后开始出现咳嗽、咳痰，黄脓痰，量多，伴有活动后气紧，夜间可平卧，无发热，无咯血。2周前至瑞金市人民医院就诊，行胸部CT示:1.两肺感染性病变；2.纵膈淋巴结肿大。治疗上予美洛西林抗感染、止咳、化痰对症支持治疗后，现咳嗽稍减轻，咳白痰，活动后仍气紧。现为进一步诊治入住我院。本次起病以来，患者精神一般，饮食一般，睡眠一般，体力下降，二便正常，近期体重无明显增减。入院检查：钾3.90mmol/l，尿素氮4.64mmol/l，肌酐72μmol/l，丙氨酸氨基转移酶15U/L，天门冬氨酸氨基转移酶20U/L，r-谷氨酰转肽酶28U/L，胸部CT见双肺多发结节及斑片高密度影。入院诊断：双肺阴影性质待查:肺部感染?肺Ca? 治疗经过 第1天：根据影像学结果结合患者经历，考虑患者为真菌合并细菌感染可能性大，初始方案给予美罗培南1g q12h及伏立康唑胶囊 200mg q12h（负荷剂量400mg q12h）抗感染，予特布他林5mg +布地奈德2mg 雾化 q8h、多索茶碱注射液0.2g ivgtt qd平喘，盐酸溴己新葡萄糖注射液100ml ivgtt qd祛痰。第4天：停多索茶碱换为氨茶碱注射液 0.25g ivgtt qd，特布他林5mg +布地奈德2mg q8h改为q12h。第6天：患者诉视力障碍，怀疑为伏立康唑所致，停伏立康唑改用两性霉素B脂质10mg ivgtt qd。第7天：患者咳嗽咳痰有所好转，降美罗培南降阶为哌拉西林钠他唑巴坦钠2.5g ivgtt bid。第15天：复查血生化，丙氨酸氨基转移酶77U/L、天门冬氨酸氨基转移酶32U/L，r-谷氨酰转肽酶234U/L，钾3.12mmol/l↓，尿素氮12.60mmol/l，肌酐103umol/l。患者血钾轻度偏低，转氨酶偏高，尿素氮及肌酐也较入院时有较大程度上升，两性霉素B脂质已用至40mg，考虑其为两性霉素Ｂ脂质体不良反应所致，停两性霉素B脂质体改用注射用醋酸卡泊芬净50mg（负荷剂量70mg） ivgtt qd，加用注射用复方甘草酸苷20mg ivgtt qd护肝，氯化钾缓释片 1g po tid补钾。第22天：复查血生化，钾1.98mmol/l，乳酸脱氢酶266U/L，α－羟丁酸脱氢酶195U/L。尿素氮5.40mmol/l，肌酐119μmol/l，丙氨酸氨基转移酶21U/L、天门冬氨酸氨基转移酶19U/L，r-谷氨酰转肽酶133U/L。患者转氨酶有所回落，但出现重度低钾，且心肌酶谱偏高，在氯化钾缓释片 1g po tid基础上，增加10%氯化钾注射液15ml + NS500ml ivgtt bid，10%氯化钾注射液40ml 稀释后分次口服 qd。第23天：钾2.80mmol/l。第24天：患者因经济原因自动出院。 分析讨论 患者入院时血钾正常为3.90mmol/l,第15天复查发现轻度缺钾为3.12mmol/l，并予氯化钾缓释片1g po tid，但第22天复查时发现重度缺钾为1.98mmol/l。期间患者饮食正常，且未出现呕吐腹泻等大量丢失钾的情形，分析认为低钾为药源性所致。下面将对可致血钾降低的药物进行逐个分析。 特布他林为β受体激动剂，能兴奋细胞膜上Na-K-ATP酶，可使钾离子进入细胞内而引起血钾降低。布地奈德为糖皮质激素，其有微弱的盐皮质激素样作用，即促进肾小管重吸收钠而保留水并排泄钾。多索茶碱、氨茶碱为黄嘌呤类药物，一方面其可增强Na-K-ATP酶活性，使胞内摄取K增多，另一方面其能抑制肾小管对Na+和Cl-的再吸收，致使在远曲小管Na-—K+代偿交换增加，故使K+的排出增加[1]。有研究发现单用特布他林发生低钾概率为39.5%，特布他林联合布地奈德出现低钾概率为41.3%[2]。特布他林的说明书亦指出：特布他林与黄嘌呤类和类固醇合用，可加重低血钾症[3]。患者连续使用了12天的雾化用药，多索茶碱用了3天后氨茶碱接着用了12天，在时间上和第15天复查的低钾结果契合，故认为他们与低钾有比较密切的关系。 伏立康唑的说明书上低血钾症的发生率为1.6%，绝大多数的药物（&gt;94%）在给药（静脉滴注或口服）后96小时内经尿排出[4]。第5天，因患者出现视觉障碍而停用了伏立康唑，而轻度低钾出现在第15天，在时间方面伏立康唑与低钾的关系不大。 两性霉素B脂质体由两性霉素B和脂质体按1:7的摩尔比混合而成，其低血钾大多因为肾小管酸中毒，使Ｋ+排泄增多所致[5]。其说明书非比较试验中低血钾发生概率为7%（平均剂量≤1mg/kg），而在于比较实验中，两性霉素B脂质体低血钾和肌酐升高的发生率分别为26%、21%，普通两性霉素Ｂ则为29%、34%[6]。对比发现虽然脂质体的肾毒性减少了62%，但其低血钾概率只减少了11%。第15天复查时，两性霉素B脂质体已使用了9天，血生化显示肝肾功能异常和血钾下降。药师分析认为其与两性霉素B脂质体的不良反应有很大关系，故停用了两性霉素B脂质体改用卡泊芬净，并给予了补钾与护肝治疗。两性霉素B脂质体多次给药后其消除半衰期可达39小时，而给药49d 后，消除半衰期甚至可为100～153h，猜测终末半衰期长很可能与组织中药物缓慢再分布有关[7]。有报道称两性霉素Ｂ停药5天后发生了低血钾[8]，两性霉素Ｂ脂质体停药之后，其效应并不会立即消失，仍能继续降低血钾。有研究认为两性霉素B缺钾通常发生在使用6～38d内，为预防低钾, 治疗早期即应日补钾量在4g以上, 一旦出现血钾降低, 则大于6g[9]。因此，本例患者未预防性补钾，出现低钾后补钾量又不足，这也是导致进一步低钾的原因。 复方甘草酸苷亦有盐皮质类固醇样作用，能使肾素-血管紧张素-醛固酮轴明显抑制,致使保钠排钾。但在相关报道中，低血钾是在长期（大于1个月）应用甘草酸苷护肝后才出现的[10]。患者甘草酸苷使用仅为5天，分析认为其虽有降低血钾的作用，但却并非是血钾进一步降低的主要因素。 综上，患者因平喘药特布他林、布地奈德及茶碱类药物联合使用，存在低钾风险，加之第6天换用两性霉素Ｂ脂质体后，引起轻度缺钾。此后复方甘草酸苷对低钾也有影响，但更主要的可能是两性霉素B脂质体重新分布导致其低钾效应仍在持续，加之补钾量不足，导致了血钾进一步下降。 总结 细胞内保存了人体98%的钾离子，缺钾首先是细胞内钾离子的丢失，早期时血钾表现正常，但胞内其实可能已经缺钾。这个病例提示我们，对于较长时间行雾化及茶碱平喘患者，应对血钾进行监护；对于使用两性霉素Ｂ脂质体抗真菌治疗的患者，可先预防性补钾，出现低钾时则应足量补钾。临床药师应了解引起低钾的常见药物，并结合药代药动学，对低血钾的患者予以监护，才能更好防范药源性低血钾。 参考文献 1. 萧春林,李军,陈媛,樊再雯.氨茶碱致低血钾3例[J]. 药物不良反应杂志,1999,(03):183-184. 2. 谢彦奇,邓松青. 特布他林与布地奈德联合雾化吸入对婴幼儿血钾的影响[J]. 儿科药学杂志,2008,14(06):13-15. 3. 硫酸特布他林雾化液（博利康尼 Bricanyl）中文说明书[M].2007-06-20. AstraZeneca AB 4. 注射用伏立康唑（威凡 Vfend）中文说明书[M].2015-11-07. PFIZER PGM 5. 刘晓东,李佳楠,孙浩,肇丽梅,菅凌燕. 两性霉素B与两性霉素B脂质体不良反应文献分析[J]. 中国临床药学杂志,2014,23(04):252-255. 6. 注射用两性霉素B脂质体（安浮特克 Amphotec） 中文说明书[M].2007年5月24日.Three Rivers Pharmaceuticals.LLC 7. 汪复,张婴元主编;朱德妹,汪复,张菁等编著. 实用抗感染治疗学 第2版[M].北京:人民卫生出版社.2012. 8. 林平冬. 两性霉素B治疗隐球菌性脑膜炎致低血钾1例报告[J]. 河南实用神经疾病杂志,2004,(01):69-70. 9. 陈江汉,温海,吴建华,朱元杰,陈孙孝,徐红,陈丽娜. 两性霉素B治疗隐球菌性脑膜脑炎的不良反应及其处理[J]. 第二军医大学学报,2005,(04):456-457. 10. 常雪妮,杜航,董晨明. 复方甘草酸苷致严重低血钾、横纹肌溶解1例并文献复习[J]. 西北国防医学杂志,2018,39(05):311-312. 11. 陈应文,田莉莉. 复方甘草酸苷片致严重低血钾二例报告[J]. 临床肝胆病杂志,2007,(03):237-238.","categories":[{"name":"药学","slug":"药学","permalink":"http://www.cqh.ch/categories/%E8%8D%AF%E5%AD%A6/"}],"tags":[{"name":"临床药学","slug":"临床药学","permalink":"http://www.cqh.ch/tags/%E4%B8%B4%E5%BA%8A%E8%8D%AF%E5%AD%A6/"},{"name":"药学服务","slug":"药学服务","permalink":"http://www.cqh.ch/tags/%E8%8D%AF%E5%AD%A6%E6%9C%8D%E5%8A%A1/"},{"name":"病例分析","slug":"病例分析","permalink":"http://www.cqh.ch/tags/%E7%97%85%E4%BE%8B%E5%88%86%E6%9E%90/"}]},{"title":"药学漫步-一例利福平影响降血压疗效的病例分析","slug":"2019/rifampicin","date":"2019-10-01T01:18:08.000Z","updated":"2020-01-01T10:46:04.161Z","comments":true,"path":"2019/rifampicin.html","link":"","permalink":"http://www.cqh.ch/2019/rifampicin.html","excerpt":"","text":"前言 在我国，高血压和结核病均是发病率较高的疾病，有研究称结核患者中约有48.75%同时伴有高血压[1]，因此针对结核合并高血压患者的治疗用药，值得药师去关注。本文将分析降血压与抗结核药物之间的相互作用，探讨利福平对降血压疗效的影响，为合并高血压和结核的患者的用药提供参考，从而指导合理用药及更好的开展药学监护。 病史资料 患者男性，52岁，发现肾功能异常3年余，腰部疼痛1月，于2018年6月28日入住肾内科，病例号454785。患者因1月前厕所摔倒后，感腰部疼痛，活动困难，呈隐痛发作，压痛明显，持续不缓解。腰椎MR平扫示：1.L5/S1椎间盘后脱出并炎性改变，上下范围约44mm，椎管狭窄；L4/5椎间盘膨出并后突出，椎管狭窄；2.L2/3、L3/4椎间盘轻度膨出，L3/4椎间盘后缘破裂；腰椎间盘变性；3.腰椎骨质增生。10余天前感腰部疼痛加重，疼痛范围较前增大，自行服用塞来昔布止痛效果差，现为进一步诊治，入住我院。患者伴有高血压，分组为3级，规律服用硝苯地平、氯沙坦钾、多沙唑嗪，血压控制在140/90mmHg以下。 治疗经过 初始治疗方案予硝苯地平控释片（30 mg po bid）、氯沙坦钾片（50 mg po qd）、甲磺酸多沙唑嗪缓释片（4 mg po qn）控制血压，促红素纠正贫血，肾康注射液护肾，及每周3次血液透析等治疗。7月10日，患者腰部疼痛未有好转，行颈椎CT考虑结核可能性大，查T-SPOT阳性。予诊断性抗结核治疗，方案为利福平胶囊 0.45g po qd，吡嗪酰胺片 0.75g po 3/周，乙胺丁醇片 0.75g po 3/周，异烟肼片 0.3g po qd。7月12日，患者血压高达180/100mmHg，血压波动较大，开始给予硝普钠持续泵入。7月16日，患者诉腰部疼痛有所好转，考虑抗结核有效，加用盐酸左氧氟沙星胶囊（0.2 g po bid）。7月25日，患者拒绝继续泵入硝普钠，医嘱停利福平，其余抗结核用药不变，血压降至143/91mmHg。8月1日，患者好转出院，腰骶部疼痛有所缓解，血压126/84mmHg。 患者抗结核用药前后血压情况见图1： 分析讨论 患者长期规律服用硝苯地平、氯沙坦钾、多沙唑嗪降压，血压控制良好。抗结核诊断治疗2天后，血压出现较大波动，开始给予硝普钠持续泵入。13天后，患者停用利福平和硝普钠后，血压降至140/90mmHg。因此，药师分析认为患者血压的变化和利福平的使用有很大关系。 有学者报道，非高血压患者抗结核治疗出现了血压升高的现象，可能有两个方面的原因，一是利福平导致交感神经兴奋，交感神经冲动增强，导致肾上腺髓质活动增加，醛固酮分泌增加，引起钠潴留，导致血压升高；二是利福平可引起患者失眠从而导致血压升高[2]。在一项针对高血压患者（16例氨氯地平，4例多沙唑嗪，4例美托洛尔）的研究则提示在应用利福平后，患者血压都升高，其中20例患者需要增加药物剂量以维持血压至140/90mmHg水平[4]。 患者所使用的3个降压药硝苯地平、氯沙坦钾、多沙唑嗪均通过肝药酶（CYP450）进行代谢，而利福平为肝药酶的强诱导剂，分析认为降压效果下降跟肝药酶的激活有关，通过文献[5-6]查得抗结核及降血压药物与CYP同工酶的作用关系，总结见表1，表2。 表1 常用抗结核药对CYP同工酶的影响 药物名称 CYP1A2 CYP2A6 CYP2C9 CYP2C19 CYP2D6 CYP3A4 利福平 ／ ＋ ＋ ＋ ／ ＋ 异烟肼 － － － － － － 乙胺丁醇 ？ ？ ？ ？ ？ ？ 吡嗪酰胺 ／ ／ ／ ／ ／ ／ 注：／：无影响；－：抑制；＋ ：诱导；？：目前不清楚。 表２ CYP诱导对降压药血药浓度的影响 CYP2A6 CYP2C9 CYP2C19 CYP3A4 CYP2E1 ／ ↓ ／ ↓ ／ ／ ／ ／ ↓ ／ ／ ／ ↓ ↓ ／ 注：／：无影响或影响微弱；↓：血药浓度低；？：目前不清楚。 从表1可以看出，抗结核用药中，利福平为肝药酶诱导剂，可诱导CYP2A6、CYP2C9、CYP2C19、CYP3A4激活。异烟肼为肝药酶抑制剂，可使CYP1A2、CYP2A6、CYP2C9、CYP2C19、CYP2D6、CYP3A4均受到抑制。虽然异烟肼对CYP450的作用与利福平相反，但当两者同时使用时，利福平对CYP的诱导作用占主导作用[6]。 从表2可以看出，氯沙坦钾通过CYP2C9及CYP3A4代谢，利福平的诱导作用可使代谢加快，从而使血药浓度下降。硝苯地平主要通过CYP3A4代谢，CYP3A4被诱导后将影响硝苯地平的首过效应和清除，使血药浓度下降。多沙唑嗪通过CYP3A4、CYP2D6及CYP2C19进行代谢，在利福平强诱导下血药浓度也将下降。 综上，抗结核治疗中，利福平对肝药酶的诱导作用将占主导地位，原降压方案硝苯地平控释片、氯沙坦钾片、甲磺酸多沙唑嗪缓释片的代谢都将被加快，使血药浓度下降，从而血压上升。而利福平虽不影响硝普钠降压效果，但硝普钠作用时间仅维持3～5分钟，可致氰化物中毒，一般仅紧急降压时使用。 总结 回顾此例病例，患者高血压3级，予抗结核诊断性治疗后，血压出现较大幅度的波动。临床药师查阅文献分析认为，利福平可诱导肝药酶激活，从而使通过肝药酶代谢的降压药代谢加快，血药浓度降低，从而使血压上升。在临床实践中，遇到高血压合并结核的患者，有三种思路：其一选择非经肝药酶代谢的降压药物，其二可行血药浓度监测增大给药剂量，其三抗结核方案中放弃利福平的使用。 参考文献 1. 杨婧,谢周华,杨雅云.合并结核病的高血压患者降压药物的合理选择[J].中国处方药,2015,13(09):19-21. 2. 李国境,才江平,魏宁.利福平致血压升高12例临床分析[J].宁夏医科大学学报,2018,40(04):460-461. 3. 魏建华,高小娜,郭蕾.利福平引起血压升高的原因分析[J].宁夏医学杂志,2016,38(10):966-967. 4. Agrawal A, Agarwal SK, Kaleekal T, Gupta YK. Rifampicin and anti-hypertensive drugs in chronic kidney disease_ Pharmacokinetic interactions and their clinical impact. Indian J Nephrol. 2016 Sep;26(5):322-328. 5. 高血压合理用药指南(第2版)[J].中国医学前沿杂志,2017,9(07):28-126. 6. 甘道京,彭强,苏海.如何为合并结核病的高血压患者合理选择降压药物[J].中华高血压杂志,2014,22(04):301-303. 7. 陈旭丽,王金明,杨赛成,王石健.利福平降低硝苯地平降压效果的案例分析[J].实用药物与临床,2014,17(12):1596-1597. 8. 何赛珠,林茵,梁智江.利福平降低硝苯地平降压疗效的病例分析[J].今日药学,2015,25(10):733-735.","categories":[{"name":"药学","slug":"药学","permalink":"http://www.cqh.ch/categories/%E8%8D%AF%E5%AD%A6/"}],"tags":[{"name":"临床药学","slug":"临床药学","permalink":"http://www.cqh.ch/tags/%E4%B8%B4%E5%BA%8A%E8%8D%AF%E5%AD%A6/"},{"name":"药学服务","slug":"药学服务","permalink":"http://www.cqh.ch/tags/%E8%8D%AF%E5%AD%A6%E6%9C%8D%E5%8A%A1/"},{"name":"病例分析","slug":"病例分析","permalink":"http://www.cqh.ch/tags/%E7%97%85%E4%BE%8B%E5%88%86%E6%9E%90/"}]},{"title":"会计漫步-会计第三等式","slug":"2019/third-equation","date":"2019-09-02T14:23:49.000Z","updated":"2020-01-01T10:48:17.048Z","comments":true,"path":"2019/third-equation.html","link":"","permalink":"http://www.cqh.ch/2019/third-equation.html","excerpt":"","text":"账户 会计要素具体化是会计科目，而会计科目落到实处为会计账户。而第三等式就是记录帐户的理论依据，也是记账基础。 很多会计基础教材，会花很大篇幅讲解借贷记账法下的账户结构，包括增加/减少/余额方向。其实没必要弄得这么复杂，记住借贷记账法是“左借右贷”，然后套在第三等式就行了，等式方向为增加和余额（动态要素无余额）方向，另一方则为减少方向，具体如下： 借 贷 资产+成本+费用 （增加） 负债+所有者权益+收入 （增加） 记住一个等式肯定要比记住六个账户结构要轻松，也比下面的总结表更简单，更有逻辑。由这个等式，可以推导出所有的账户结构。 借 贷 资产增加 资产减少 费用（成本）增加 费用（成本）减少或转出 负债及所有者权益减少 负债及所有者权益增加 收入减少或转出 收入增加减少 期末余额：资产/成本 期末余额：负债/所有者权益 分录 一般说资产负债表是静态的，利润表是动态的。 那么静态表能否动态应用呢？比如记分录，答案是肯定的！只要将账户嵌入报表就可以，T型账户就很容易嵌入。比如下表是上月末个人资产负债表： 资产 金额 负债和个人权益 金额 流动资产： 短期负债： 现金 5 000 信用卡 1 000 存款 20 000 分期付款 货币基金 100 000 债务 投资性资产： 应付款 1 500 股票 20 000 长期负债： 期货 20 000 房屋贷款 债权 5 000 汽车贷款 消费性资产： 其他 房产 负债合计 2 500 汽车 社会保险 30 000 个人权益 197 500 其他 资产合计 200 000 权益合计 200 000 本月发生如下事项： a. 分期付款60 000购置汽车一辆。 b.以存款还信用卡1 000。 c.用现金支付应付款1 500。 该如何用资产负债表记录上述事项呢？可以将金额栏一分为二，然后按记账规则记入报表即可，如下表： 资产 I 借 II 贷 负债和个人权益 III 借 IV 贷 流动资产： 短期负债： 现金 5 000 C -1 500 信用卡 B -1 000 1 000 存款 20 000 B -1 000 分期付款 A +60 000 货币基金 100 000 债务 投资性资产： 应付款 C -1 500 1 000 股票 20 000 长期负债： 期货 20 000 房屋贷款 债权 5 000 汽车贷款 消费性资产： 其他 房产 负债合计 2 000 汽车 A +60 000 社会保险 30 000 个人权益 198 000 其他 资产合计 200 000 权益合计 200 000 平衡 如果按上表记账，可以看出复式借贷记账法的对称性，即有借必有贷。正常经济事项必然是对称的，I借II贷对称，III贷IV借对称，I借IV贷对称，II借III贷对称。不对称的事项当然是错误的，不可能发生I借III借或II贷IV贷这样的事情。这可以用来做试算平衡。 报表 静态表的动态运用当然还有第二阶段，即将动态表根据第三等式整合进静态表中去。下面是将支出收入表整入资产负债表的样子： 资产 负债和个人权益 流动资产： 短期负债： 现金 信用卡 存款 分期付款 货币基金 债务 投资性资产： 应付款 股票 长期负债： 期货 房屋贷款 债权 汽车贷款 消费性资产： 其他 房产 负债合计 汽车 社会保险 个人权益 其他 —————— —————— —————— —————— 支出： 收入： 衣服 工资 食物 奖金 居住 津贴 交通 理财 玩乐 利息 通信 租金 交际 增值 其他 其他 资产合计 权益合计 由此不难看出，支出是具有资产性质，收入具有权益性质。又因动态要素一般结转无余额，故不体现在静态报表上。","categories":[{"name":"会计","slug":"会计","permalink":"http://www.cqh.ch/categories/%E4%BC%9A%E8%AE%A1/"}],"tags":[{"name":"资产负债表","slug":"资产负债表","permalink":"http://www.cqh.ch/tags/%E8%B5%84%E4%BA%A7%E8%B4%9F%E5%80%BA%E8%A1%A8/"},{"name":"利润表","slug":"利润表","permalink":"http://www.cqh.ch/tags/%E5%88%A9%E6%B6%A6%E8%A1%A8/"}]},{"title":"密码生成器(js+html)","slug":"2019/pswd","date":"2019-08-24T15:34:38.000Z","updated":"2020-01-01T13:39:01.275Z","comments":true,"path":"2019/pswd.html","link":"","permalink":"http://www.cqh.ch/2019/pswd.html","excerpt":"","text":"在完成随机字符串生成器后，实现一个密码生成器似乎是件没有难度的事情，但我还是想得太简单了。 首先是获得url中的参数，可以参考获取URL中的查询参数。实际上，并不需要这么复杂的处理。这里只需要取得url中?之后的查询部分，简单粗暴用url = location.search.substr(1)就可以了。考虑到url中也可能没有查询部分，所以还得有判断和默认的逻辑。 然后是将生成的密码写到网页中去，这个用JS操作DOM并没有难度。考虑到可能有临时编辑的需要，宜用input或textarea标签。 再就是复制的功能，可以直接调用比较完善clipboard.js。文档介绍了两种方式，其他元素中用data-clipboard-target，自身属性用data-clipboard-text。文案写得清晰易懂，实现点击复制并不难。但我花了很多时间去思考实现自动复制。一个密码生成之后，除非需要编辑修改，否则当然就是复制。省事的做法是，密码生成后就自动复制到剪切板中去。所以要实现一个生成复制的函数。 起初，我用的是data-clipboard-target，无论是onLoad还是onClick都无法实现自动复制，也没有相关参考。直到在文档中看到动态设置文本用到getAttribute，我才反想到setAttribute。换用data-clipboard-text终于实现了我需要的功能。 1html23&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset&#x3D;&quot;utf-8&quot; &#x2F;&gt;4&lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width,user-scalable&#x3D;no,initial-scale&#x3D;1.0,maximum-scale&#x3D;1.0,minimum-scale&#x3D;1.0&quot;&gt;5&lt;title&gt;PSWD&lt;&#x2F;title&gt;6&lt;&#x2F;head&gt;&lt;body &gt;78&lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;target&quot; &#x2F;&gt;9&lt;button type&#x3D;&quot;button&quot; id&#x3D;&quot;genCopy_&quot; onclick&#x3D;&#39;genCopy(this)&#39; &gt;genCopy&lt;&#x2F;button&gt;10&lt;button type&#x3D;&quot;button&quot; id&#x3D;&quot;gen_&quot; onclick&#x3D;&#39;gen()&#39;&gt;gen&lt;&#x2F;button&gt;11&lt;button type&#x3D;&quot;button&quot; id&#x3D;&quot;copy_&quot; onclick&#x3D;&#39;copy(this)&#39;&gt;copy&lt;&#x2F;button&gt;12&lt;button type&#x3D;&quot;button&quot; id&#x3D;&quot;save_&quot; onclick&#x3D;&#39;save(this)&#39;&gt;save&lt;&#x2F;button&gt;13&lt;br &#x2F;&gt;14&lt;textarea id&#x3D;&quot;target2&quot; cols&#x3D;&quot;30&quot; rows&#x3D;&quot;30&quot;&gt;15&lt;&#x2F;textarea&gt;16&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;17&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;randstr.js&quot;&gt;&lt;&#x2F;script&gt;18&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;pswd.js&quot;&gt;&lt;&#x2F;script&gt;19&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;clipboard.min.js&quot;&gt;&lt;&#x2F;script&gt;2021js2223&#x2F;**24 pswd.js25 Ande.Studio26 v3 2019082627 **&#x2F;28target &#x3D; document.getElementById(&quot;target&quot;);29target2 &#x3D; document.getElementById(&quot;target2&quot;);3031function gen(args&#x3D;&#39;nul8&#39;)&#123;&#x2F;&#x2F;密码生成32 if(url &#x3D; location.search)&#123;33 args &#x3D; url.substr(1);34 str &#x3D; randstr(args);35 &#125;else&#123;36 str &#x3D; randstr(args);37 &#125;3839 target.value &#x3D; str;&#x2F;&#x2F;将str写入目标元素赋值40 target2.value &#x3D; str + &#39;\\n&#39; + target2.value;&#x2F;&#x2F;将str追加写入目标文本域41 console.log(str);42 return str;43&#125;4445function copy(obj)&#123;&#x2F;&#x2F;复制 46 var clipboard &#x3D; new ClipboardJS(&quot;#&quot;+obj.id);47 document.getElementById(obj.id).setAttribute(&quot;data-clipboard-target&quot;,&quot;#target&quot;);&#x2F;&#x2F;data-clipboard-target，复制可见48&#125;4950function genCopy(obj)&#123;&#x2F;&#x2F;生成加复制 51 gen();52 copy(obj);53 &#x2F;&#x2F;document.getElementById(obj.id).setAttribute(&quot;data-clipboard-text&quot;,gen());&#x2F;&#x2F;data-clipboard-text，复制过程不可见。假设在这条代码之前执行gen();copy(obj);会gen()2次，但只会copy最后一次gen()54 &#x2F;&#x2F;data-clipboard-target和data-clipboard-text同时存在的话，text将优先target会失效。55 56&#125;5758function save()&#123;&#x2F;&#x2F;保存5960&#125;61window.onload &#x3D; function()&#123;&#x2F;&#x2F;载入调用62 str &#x3D; gen();63 target2.value &#x3D; &#39;&#39;;&#x2F;&#x2F;清空gen()设置的target2值，以显示占位符64 ph &#x3D; str + &#96;\\n\\n\\n pswd.html?nul865默认参数nul8，生成8位随机字符串，包含大小写字母数字66s:special character特殊字符67n:number 数字68u:upper case大写字母69l:lower case小写字母70数字用作控制生成随机字符的长度&#96;&#x2F;&#x2F;占位符71 &#x2F;&#x2F;target2.setAttribute(&quot;placeholder&quot;,ph);72 target2.placeholder&#x3D;ph;7374&#x2F;**75 var obj &#x3D; new Object();76 obj[&#39;id&#39;]&#x3D; &#39;genCopy_&#39;77 genCopy(obj);78 手工构造一个obj,指定obj[&#39;id&#39;]&#x3D;&#39;genCopy_&#39;或者obj.id&#x3D;&#39;genCopy_&#39;,以期在载入时调用genCopy(obj),实际上确实调用了且生成了密码且没有报错，但却不会实现复制。79 这是值得注意的问题，具体的机制有待研究。80**&#x2F;81&#125; Todo js save() 相关代码已放在github。","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://www.cqh.ch/categories/JavaScript/"}],"tags":[{"name":"密码","slug":"密码","permalink":"http://www.cqh.ch/tags/%E5%AF%86%E7%A0%81/"},{"name":"生成器","slug":"生成器","permalink":"http://www.cqh.ch/tags/%E7%94%9F%E6%88%90%E5%99%A8/"},{"name":"clipboard.js","slug":"clipboard-js","permalink":"http://www.cqh.ch/tags/clipboard-js/"}]},{"title":"document.getElementById(\"_id\") is null","slug":"2019/jserr","date":"2019-08-22T23:31:01.000Z","updated":"2020-01-01T11:05:55.191Z","comments":true,"path":"2019/jserr.html","link":"","permalink":"http://www.cqh.ch/2019/jserr.html","excerpt":"","text":"错误原因:body还没有加载，此时，无法获取dom对象元素，则程序就会报错document.getElementById(“_id”) is null 解决办法就是将javascript代码写到body的元素的最后位置","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://www.cqh.ch/categories/JavaScript/"}],"tags":[{"name":"debug","slug":"debug","permalink":"http://www.cqh.ch/tags/debug/"}]},{"title":"随机字符串生成器(JavaScript实现)","slug":"2019/randstr","date":"2019-08-22T16:14:27.000Z","updated":"2020-01-01T13:39:02.815Z","comments":true,"path":"2019/randstr.html","link":"","permalink":"http://www.cqh.ch/2019/randstr.html","excerpt":"","text":"问题随机字符串最常见的用法作密码生成器，网上有很多相关文章。但我的需求有点特殊：这个生成器应该是本地的，免安装的，很少依赖的，可定制的，也可远程的。这样就排除了需要安装的app，依赖于网络及第三方的小程序或其他网络应用。 解决方案javascript会是一个比较好的选择，只要嵌入进html文件中，就可以通过浏览器调用，实现本地化，免安装，很少依赖性。而通过地址栏的的url参数，实现可定制。而如果部署到网络空间上，可以远程调用。 首先我们需要随机生成一个数字，Math.random()*m 生成一个0~m的随机数，然后用这个随机数索引出一个随机字符。 可见字符的ascii码为33到126，以下取得随机字符的方法相当优雅：String.fromCharCode(33 + Math.floor(Math.random()*(126-33)))但因特殊字符分散在数字，大写字母，小写字母之间，并不连贯，要实现可定制比较费事。 解决之道是，先定制一个字符母串strs，用strs[Math.floor(Math.random()*strs.length]取得随机字符。以下是代码实现： 1function randstr(args&#x3D;&#39;snul8&#39;)&#123;2 &#x2F;&#x2F;s:special character特殊字符3 &#x2F;&#x2F;n:number数字4 &#x2F;&#x2F;u:upper case大写字母5 &#x2F;&#x2F;l:lower case小写字母6 &#x2F;&#x2F;数字8用作控制生成随机字符的长度,也可以是其他数字7 &#x2F;&#x2F;默认参数snul8，生成8位随机字符串，包含特殊字符，数字和大小写字母89 var special &#x3D; &#39;!&quot;#$%&amp;\\&#39;()*+,-.&#x2F;:;&lt;&#x3D;&gt;?@[\\\\]^_&#96;&#123;|&#125;~&#39;;&#x2F;&#x2F;有些特殊字符如&#39;和\\要加\\转义10 var number &#x3D; &#39;0123456789&#39;;11 var lower &#x3D; &#39;abcdefghijklmnopqrstuvwxyz&#39;;12 var upper &#x3D; &#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;;13 var strs &#x3D; &#39;&#39;;&#x2F;&#x2F;用作母串载体14 var str &#x3D; &#39;&#39;;&#x2F;&#x2F;用作随机字串载体1516 var num&#x3D; args.replace(&#x2F;[^0-9]&#x2F;ig,&quot;&quot;);&#x2F;&#x2F;取得args中的数字，作密码长度17 if(args.search(&quot;s&quot;)!&#x3D;-1)&#123;&#x2F;&#x2F;如果args中有s,母串中含有特殊字符18 strs +&#x3D; special;19 &#125;20 if(args.search(&quot;n&quot;)!&#x3D;-1)&#123;&#x2F;&#x2F;如果args中有n,母串中含有数字21 strs +&#x3D; number;22 &#125;23 if(args.search(&quot;u&quot;)!&#x3D;-1)&#123;&#x2F;&#x2F;如果args中有u,母串中含有大写字母24 strs +&#x3D; upper;25 &#125;26 if(args.search(&quot;l&quot;)!&#x3D;-1)&#123;&#x2F;&#x2F;如果args中有l,母串中含有小写字母27 strs +&#x3D; lower;28 &#125;2930 var len &#x3D; strs.length;31 for (i&#x3D;0; i&lt;num; i++)&#123;32 j &#x3D; Math.floor(Math.random()*len);33 str +&#x3D; strs[j]34 &#125;3536 return str;3738&#125;3940str &#x3D; randstr(&#39;l6un&#39;);41console.log(str);42alert(str); 讨论 至此，我们已经实现了一个随机字符生成器，但要作为一个密码器使用，还是得完善一些东西。在某些浏览器上弹出窗口可能不能被复制，而很多移动终端并没有控制台，所以得将字符串写入网页中去。更进一步的，在网页还需要一键复制的按钮，以及远程保存的按钮。而如果涉及保存的话，还得实现加密，因为保存原始密码并不安全也不推荐。","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://www.cqh.ch/categories/JavaScript/"}],"tags":[{"name":"生成器","slug":"生成器","permalink":"http://www.cqh.ch/tags/%E7%94%9F%E6%88%90%E5%99%A8/"},{"name":"随机","slug":"随机","permalink":"http://www.cqh.ch/tags/%E9%9A%8F%E6%9C%BA/"},{"name":"字符串","slug":"字符串","permalink":"http://www.cqh.ch/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"}]},{"title":"LAKIA-赶集网和58同城二手房爬虫","slug":"2019/ershoufang","date":"2019-08-11T13:27:20.000Z","updated":"2020-01-01T13:39:05.878Z","comments":true,"path":"2019/ershoufang.html","link":"","permalink":"http://www.cqh.ch/2019/ershoufang.html","excerpt":"","text":"最近在关注房产信息，天天刷网页或者关注经纪人朋友圈真的是一件极其耗费心神的事情，趁着周末想着写个爬虫自动完成这件事情。 1# ErShouFang.py2# Ganji.com 58.com 二手房爬虫3# Ande.Studio (c) 2019-08-1145import requests6from lxml import etree7import time89cookies &#x3D; &#123;10&#125;11headers &#x3D; &#123;12 &#39;User-Agent&#39;: &#39;Mozilla&#x2F;5.0 (X11; Linux x86_64; rv:68.0) Gecko&#x2F;20100101 Firefox&#x2F;68.0&#39;,13&#125;141516def GanjiErShouFang(url):17 response &#x3D; requests.post(url, headers&#x3D;headers, cookies&#x3D;cookies)18 html &#x3D; response.text19 html &#x3D; etree.HTML(html)20 flist &#x3D; html.xpath(&#39;&#x2F;&#x2F;div[@class&#x3D;&quot;f-list-item ershoufang-list&quot;]&#39;)#房屋信息列表2122 for f in flist:23 title &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item title&quot;]&#x2F;a&#x2F;text()&#39;)[0]#标题24 href &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item title&quot;]&#x2F;a&#x2F;@href&#39;)[0]#链接地址2526 layout &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item size&quot;]&#x2F;span&#x2F;text()&#39;)[0]#布局27 size &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item size&quot;]&#x2F;span&#x2F;text()&#39;)[1]#面积大小28 toward &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item size&quot;]&#x2F;span&#x2F;text()&#39;)[2]#朝向29 floor &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item size&quot;]&#x2F;span&#x2F;text()&#39;)[3]#楼层3031 address &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item address&quot;]&#x2F;span[@class&#x3D;&quot;area&quot;]&#x2F;a&#x2F;text()&#39;)[0]#所在地址32 area &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item address&quot;]&#x2F;&#x2F;span[@class&#x3D;&quot;address-eara&quot;]&#x2F;text()&#39;)[0]#小区3334 organization &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item address&quot;]&#x2F;span[@class&#x3D;&quot;area&quot;]&#x2F;text()&#39;)[3]#发布组织35 organization &#x3D; organization.replace(&quot; &quot;, &#39;&#39;).replace(&quot;－&quot;, &#39;&#39;).replace(&quot;\\n&quot;, &#39;&#39;)36 manager &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item address&quot;]&#x2F;&#x2F;span[@class&#x3D;&quot;address-eara&quot;]&#x2F;text()&#39;)[1]#经纪人3738 price &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item info&quot;]&#x2F;div[@class&#x3D;&quot;price&quot;]&#x2F;span[@class&#x3D;&quot;num&quot;]&#x2F;text()&#39;)[0]#房屋总价39 average &#x3D; f.xpath(&#39;.&#x2F;&#x2F;dd[@class&#x3D;&quot;dd-item info&quot;]&#x2F;div[@class&#x3D;&quot;time&quot;]&#x2F;text()&#39;)[0]#房屋单价40 average &#x3D; average.replace(&quot;元&#x2F;㎡&quot;, &#39;&#39;)41 print(title)42 print(&quot;#&quot;*50)43 try:44 nextpage &#x3D; html.xpath(&#39;&#x2F;&#x2F;div[@class&#x3D;&quot;pageBox&quot;]&#x2F;&#x2F;a[@class&#x3D;&quot;next&quot;]&#x2F;@href&#39;)[0]#下一页45 time.sleep(3)#休息3秒，以防过频繁导致机器人验证46 GanjiErShouFang(nextpage)47 except:48 pass4950def WubaErShouFang(url):51 response &#x3D; requests.get(url, headers&#x3D;headers)#post will get nothing, get is ok!52 html &#x3D; response.text53 html &#x3D; etree.HTML(html)54 flist &#x3D; html.xpath(&#39;&#x2F;&#x2F;ul[@class&#x3D;&quot;house-list-wrap&quot;]&#x2F;li&#39;)#房屋信息列表5556 for f in flist:57 title &#x3D; f.xpath(&#39;.&#x2F;&#x2F;h2[@class&#x3D;&quot;title&quot;]&#x2F;a&#x2F;text()&#39;)[0]58 href &#x3D; f.xpath(&#39;.&#x2F;&#x2F;h2[@class&#x3D;&quot;title&quot;]&#x2F;a&#x2F;@href&#39;)[0]#链接地址5960 layout &#x3D; f.xpath(&#39;.&#x2F;&#x2F;p[@class&#x3D;&quot;baseinfo&quot;]&#x2F;span&#x2F;text()&#39;)[0]#布局61 size &#x3D; f.xpath(&#39;.&#x2F;&#x2F;p[@class&#x3D;&quot;baseinfo&quot;]&#x2F;span&#x2F;text()&#39;)[1]#面积大小62 toward &#x3D; f.xpath(&#39;.&#x2F;&#x2F;p[@class&#x3D;&quot;baseinfo&quot;]&#x2F;span&#x2F;text()&#39;)[2]#朝向63 floor &#x3D; f.xpath(&#39;.&#x2F;&#x2F;p[@class&#x3D;&quot;baseinfo&quot;]&#x2F;span&#x2F;text()&#39;)[3]#楼层6465 address &#x3D; f.xpath(&#39;.&#x2F;&#x2F;p[@class&#x3D;&quot;baseinfo&quot;]&#x2F;&#x2F;a&#x2F;text()&#39;)[1]#所在地址66 area &#x3D; f.xpath(&#39;.&#x2F;&#x2F;p[@class&#x3D;&quot;baseinfo&quot;]&#x2F;&#x2F;a&#x2F;text()&#39;)[0]#小区67 #road &#x3D; f.xpath(&#39;.&#x2F;&#x2F;p[@class&#x3D;&quot;baseinfo&quot;]&#x2F;&#x2F;a&#x2F;text()&#39;)[2]#6869 #organization &#x3D; f.xpath(&#39;.&#x2F;&#x2F;div[@class&#x3D;&quot;jjrinfo&quot;]&#x2F;&#x2F;span[@class&#x3D;&quot;anxuan-qiye-text&quot;]&#x2F;text()&#39;)[0]#发布组织70 #manager &#x3D; f.xpath(&#39;.&#x2F;&#x2F;div[@class&#x3D;&quot;jjrinfo&quot;]&#x2F;&#x2F;span[@class&#x3D;&quot;jjrname-outer&quot;]&#x2F;text()&#39;)[0]#经纪人71 #当经纪人为个人时， &lt;span class&#x3D;&quot;jjrname-outer anxuan-qiye-text&quot;&gt;xxx&lt;&#x2F;span&gt; 故用class定位将会出现意外7273 organization &#x3D; f.xpath(&#39;.&#x2F;&#x2F;div[@class&#x3D;&quot;jjrinfo&quot;]&#x2F;&#x2F;span&#x2F;text()&#39;)[0]#发布组织74 manager &#x3D; f.xpath(&#39;.&#x2F;&#x2F;div[@class&#x3D;&quot;jjrinfo&quot;]&#x2F;&#x2F;span&#x2F;text()&#39;)[2]#经纪人7576 price &#x3D; f.xpath(&#39;.&#x2F;&#x2F;div[@class&#x3D;&quot;price&quot;]&#x2F;p[@class&#x3D;&quot;sum&quot;]&#x2F;b&#x2F;text()&#39;)[0]#房屋总价77 average &#x3D; f.xpath(&#39;.&#x2F;&#x2F;div[@class&#x3D;&quot;price&quot;]&#x2F;p[@class&#x3D;&quot;unit&quot;]&#x2F;text()&#39;)[0]#房屋单价78 average &#x3D; average.replace(&quot;元&#x2F;㎡&quot;, &#39;&#39;)7980 #time &#x3D; f.xpath(&#39;.&#x2F;&#x2F;div[@class&#x3D;&quot;time&quot;]&#x2F;text()&#39;)[0]#发布时间8182 print(title)83 print(&quot;#&quot;*50)84 85 try:86 nextpage &#x3D; html.xpath(&#39;&#x2F;&#x2F;div[@class&#x3D;&quot;pager&quot;]&#x2F;&#x2F;a[@class&#x3D;&quot;next&quot;]&#x2F;@href&#39;)[0]#下一页87 time.sleep(3)#休息3秒，以防过频繁导致机器人验证88 WubaErShouFang( &#39;https:&#x2F;&#x2F;ganzhou.58.com&#39; + nextpage)89 except:90 pass919293url &#x3D; &#39;http:&#x2F;&#x2F;ganzhou.ganji.com&#x2F;shangyou&#x2F;ershoufang&#x2F;&#39;94GanjiErShouFang(url)9596url &#x3D; &#39;https:&#x2F;&#x2F;ganzhou.58.com&#x2F;shangyou&#x2F;ershoufang&#x2F;&#39;97WubaErShouFang(url) 运行结果： 本来想着这是一个很小的项目，杀鸡焉用牛刀，所以放弃了使用Scrapy，自己从头写一个爬虫就够用了，但事情并不是如此简单。写爬虫的目的是为了获得数据从而利于决策，并不是简单输出就了事。首先它得提示我新的房产信息，其次它得在众多信息中计算性价比较高的选择，由此就埋下了两个坑。同时，在编程的过程中，我产了两个新的想法：一是对全国的房产数据进行取样制作房价指数，以利投资分析；二是不局限于房产信息，可以抓取其他数据发挥利用的价值。所以到头来，还是得用到框架。","categories":[{"name":"Python","slug":"Python","permalink":"http://www.cqh.ch/categories/Python/"}],"tags":[{"name":"爬虫","slug":"爬虫","permalink":"http://www.cqh.ch/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"iCalendar学习研究","slug":"2019/icalendar","date":"2019-07-28T10:38:50.000Z","updated":"2020-01-01T11:09:39.161Z","comments":true,"path":"2019/icalendar.html","link":"","permalink":"http://www.cqh.ch/2019/icalendar.html","excerpt":"","text":"iCalendar是由RFC5545定义的一种日历日程文件规范，扩展名名为ics，下面是对一份导出日历备注学习 1BEGIN:VCALENDAR2PRODID:-&#x2F;&#x2F;ACal&#x2F;&#x2F;Ande.Studio3VERSION:2.04METHOD:PUBLISH5CALSCALE:GREGORIAN6X-WR-TIMEZONE:Asia&#x2F;Shanghai78BEGIN:VEVENT9DTSTAMP:20190701T000000Z10UID:1@wt20190711SUMMARY:日历事件一12DTSTART:20190701T08000013DTEND:20190701T12000014BEGIN:VALARM15TRIGGER:-PT10M16ACTION:DISPLAY17END:VALARM18END:VEVENT1920BEGIN:VEVENT21DTSTAMP:20190701T000000Z22UID:2@wt20190723SUMMARY:日历事件二24DTSTART;VALUE&#x3D;DATE:2019071525DTEND;VALUE&#x3D;DATE:2019071626END:VEVENT2728END:VCALENDAR 日历总体被包含在VCALENDAR标签对之中。开头指定一些基本信息中值得注意的是X-WR-TIMEZONE用来指定时区，加上这条标记可以避免后面时间逐个指定时区，减少冗余。 VEVENT定义事件，DTSTAMP是事件创建时间。UID是事件识别码，必须唯一。SUMMARY是事件的描述。DTSTART与DTEND分别是事件的开始与结束时间，若只为日期，应加;VALUE=DATE限定。 VALARM定义提醒，其必须镶嵌在VEVENT之中，一个事件可以有多个VALARM（某些应用可能不支持）。TRIGGER为触发提醒的时点，默认是与DTSTART关联的，-PT10M意为开始前10分钟，-号为必需。不带-号并不会被当然地理解为开始后的时点。也可以将触发与结束时间相关联，此时应加;RELATED=END限定（某些应用可能不支持）。ACTION为提醒的动作。","categories":[{"name":"日历","slug":"日历","permalink":"http://www.cqh.ch/categories/%E6%97%A5%E5%8E%86/"}],"tags":[{"name":"日历","slug":"日历","permalink":"http://www.cqh.ch/tags/%E6%97%A5%E5%8E%86/"},{"name":"rfc","slug":"rfc","permalink":"http://www.cqh.ch/tags/rfc/"}]},{"title":"神之强国","slug":"2019/xxqg","date":"2019-07-09T04:43:47.000Z","updated":"2020-01-01T11:10:55.471Z","comments":true,"path":"2019/xxqg.html","link":"","permalink":"http://www.cqh.ch/2019/xxqg.html","excerpt":"","text":"研究了下学习强国，得出的攻略是：听广播（音乐）—12分钟看6篇文章（分享+收藏+回复）—然后6分钟看6个视频。18分钟会有29的积分。听音频的同时是可以看文章的，但因为重复不会积分，所以文章应选每日更新的时评或国际新闻，视听应选联播频道。 这么简单且清晰的流程，应该可以写段程序代劳，以下是程序逻辑，至于具体实现，就让胆大的人去分享吧。 1function Audio()&#123;&#x2F;&#x2F;12分钟听音频2 listen(12min)3&#125;45function Article()&#123;&#x2F;&#x2F;12分钟读6篇文章6 for(i&#x3D;0, i&lt;6, i++)&#123;7 article[i]8 for(j&#x3D;0, j&lt;4,j++)&#123;9 read(30s)10 pageDown()11 &#125;1213 if(i&lt;2)&#123;&#x2F;&#x2F;收藏+分享+回复 2次14 collect()15 share()16 reply(sth)17 &#125; 18 &#125;19&#125;2021function Video()&#123;&#x2F;&#x2F;6分钟看6个视频22 for(i&#x3D;0, i&lt;6, i++)&#123;23 video[i]24 watch(60s)25 &#125;26&#125; 当然，仅仅实现以上是完全不够的，这么机械化的操作，很容易被判为机器人，所以还得有反反舞弊的逻辑… 如此，每天29分完全没有压力嘛，广大党员要提高标准和待遇，每天不少于46分，少1分扣100元。如此才能防范作弊，调动积极性。若如此能超越美国制霸全球，我倒是非常愿意每天多花十倍时间学习强国，然并卵…","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://www.cqh.ch/categories/JavaScript/"}],"tags":[{"name":"自动化","slug":"自动化","permalink":"http://www.cqh.ch/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"},{"name":"机器人","slug":"机器人","permalink":"http://www.cqh.ch/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/"},{"name":"学习强国","slug":"学习强国","permalink":"http://www.cqh.ch/tags/%E5%AD%A6%E4%B9%A0%E5%BC%BA%E5%9B%BD/"}]},{"title":"革新记之药品管理-库存数量表获取","slug":"2019/inventory-quantity","date":"2019-06-26T11:17:18.000Z","updated":"2020-01-01T13:31:01.731Z","comments":true,"path":"2019/inventory-quantity.html","link":"","permalink":"http://www.cqh.ch/2019/inventory-quantity.html","excerpt":"","text":"革新记之药品管理-库存数量表获取情景分析： 有一份有序的参照表和一份无序的由系统导出的库存表，如何在参照表中得到库存信息？sheet1 参照表 sheet2 库存表 功能实现： 如果两份列表长度一样的话，那么只要按同一种排序方式就可以。但如果长度不一样的话，就得花一番心思。下面给出一种使用办公软件实现的方法。 假设sheet1 C列和sheet2 G列的品名一致且唯一，sheet2 K列即我们需要的库存信息。那么在sheet1的空白列（如H列）填充公式“=SUMIF($sheet2.G:G,C2,$sheet2.K:K)”即可得到全表库存信息。 而区域的库存信息可通过sheet2 F列设置过滤标签得到。 库存变动的话，更新sheet2 库存表即可。","categories":[{"name":"药剂科","slug":"药剂科","permalink":"http://www.cqh.ch/categories/%E8%8D%AF%E5%89%82%E7%A7%91/"}],"tags":[{"name":"革新","slug":"革新","permalink":"http://www.cqh.ch/tags/%E9%9D%A9%E6%96%B0/"},{"name":"Office","slug":"Office","permalink":"http://www.cqh.ch/tags/Office/"}]},{"title":"革新记之药品管理-盘点准备表生成","slug":"2019/inventory-pre","date":"2019-06-26T09:39:05.000Z","updated":"2020-01-01T09:47:01.618Z","comments":true,"path":"2019/inventory-pre.html","link":"","permalink":"http://www.cqh.ch/2019/inventory-pre.html","excerpt":"","text":"情景分析： 有一份系统导出的参照表，四份手工录入的分区表和一份手工录入的基数表。如何将分区和基数导入参照表生成盘点准备表？ 功能实现： 运用按父串生成子串列表算法，将手工录入的条目转化为系统标准条目得到标准分区表和标准基数表。 运用根据子集列表操作父集列表算法，根据标准分区表和标准基数表分别操作参照表，最后合并过滤得到含有分区和基数信息的准备表。","categories":[{"name":"药剂科","slug":"药剂科","permalink":"http://www.cqh.ch/categories/%E8%8D%AF%E5%89%82%E7%A7%91/"}],"tags":[{"name":"算法","slug":"算法","permalink":"http://www.cqh.ch/tags/%E7%AE%97%E6%B3%95/"},{"name":"革新","slug":"革新","permalink":"http://www.cqh.ch/tags/%E9%9D%A9%E6%96%B0/"}]},{"title":"革新记之药品管理-盘点方案改革","slug":"2019/inventory-plan","date":"2019-06-26T07:09:15.000Z","updated":"2020-01-01T09:49:58.831Z","comments":true,"path":"2019/inventory-plan.html","link":"","permalink":"http://www.cqh.ch/2019/inventory-plan.html","excerpt":"","text":"革新记之药品管理-盘点方案改革我们有两种形式的盘点即区域小盘点和全范围大盘点，而这两种盘点均包含两种步骤，即实数准备和理论确认。 实数准备虽是个体力活，但也并非无可改善的地方。以往的盘点准备表是无序的，这导致我们查找时比较麻烦，尤其是多张表的时候。但如果准备表是有序的，那么我们就可以快速查找。 理论确认实际是个脑力活，但以往我们是逐个人工定位再录入数据，效率非常低下。在大盘的时候，如果确认表和准备表的顺序是一致的话，我们就可以省下定位时间而专心录入数据即可。而在小盘的时候，可以通过技巧提取出所需区域信息，同样省却很多输入工作。 基于上述两点理由我建议进行以下改革：1.生成有序的确认表和准备表，便于定位和比对。详情可参考盘点准备表生成。2.大盘分页负责而非按区域，利于连续和去重，小盘直接由大盘筛选而得，两不耽误。以前的准备表是按区域的，一方面无序且不连续而导致多出很多手工录入步骤；另一方面由于区域的变动而波及多张表，甚而可能导致列表项的重复或缺失。仍然可以保留区域责任制，但区域表应该由全表标签筛选而得，而非人工割裂而得，由此仅需维护一张表就可以了。详情可参考库存数量表获取。3.条目名称做到统一性和唯一性，益于数据连接耦合。即通过名称就能唯一识别不同品规，这样就不必参考不人性的数字ID及附加规格信息。","categories":[{"name":"药剂科","slug":"药剂科","permalink":"http://www.cqh.ch/categories/%E8%8D%AF%E5%89%82%E7%A7%91/"}],"tags":[{"name":"革新","slug":"革新","permalink":"http://www.cqh.ch/tags/%E9%9D%A9%E6%96%B0/"}]},{"title":"革新记之药品管理-根据子集列表操作父集列表","slug":"2019/sof","date":"2019-06-17T22:33:15.000Z","updated":"2020-01-01T13:30:57.581Z","comments":true,"path":"2019/sof.html","link":"","permalink":"http://www.cqh.ch/2019/sof.html","excerpt":"","text":"情景分析：样表为参照表的子集，如何根据子集列表对父集进行分类操作参照表： 样表： 算法分析：1.遍历父集，跟子集比对，若包含在子集中，则进行分类操作。 代码演示： 1#sof.py SonSetOperationFatherSet2#ande.stduio (c) 2019-06-18 05:59:0534import numpy as np56std &#x3D; np.loadtxt(&quot;20.csv&quot;, delimiter&#x3D;&quot;,&quot;, usecols&#x3D;(1), dtype&#x3D;str, skiprows&#x3D;1, unpack&#x3D;True, encoding&#x3D;&#39;utf8&#39;)#参照表7smp &#x3D; np.loadtxt(&quot;24.csv&quot;, delimiter&#x3D;&quot;,&quot;, usecols&#x3D;(0), dtype&#x3D;str, skiprows&#x3D;1, unpack&#x3D;True, encoding&#x3D;&#39;utf8&#39;)#样表89for i in range(len(std)):10 print(std[i], end&#x3D;&quot;\\t&quot;)11 for j in range(len(smp)):12 if std[i].find(smp[j]) !&#x3D; -1:13 print(&#39;E&#39;, end&#x3D;&quot;&quot;)#分类操作14 print() 运行结果：","categories":[{"name":"Python","slug":"Python","permalink":"http://www.cqh.ch/categories/Python/"}],"tags":[{"name":"算法","slug":"算法","permalink":"http://www.cqh.ch/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"革新记之药品管理-按父串生成子串列表","slug":"2019/fbs","date":"2019-06-16T16:07:03.000Z","updated":"2020-01-01T13:30:59.488Z","comments":true,"path":"2019/fbs.html","link":"","permalink":"http://www.cqh.ch/2019/fbs.html","excerpt":"","text":"革新记之药品管理-按父串生成子串列表情景分析：样表为参照表的子集，其条目大部分是参照表的子串，少些则不是，如何将这份样表按参照表的条目重新生成？参照表： 样表： 算法分析：1.遍历样表条目，与参照表比对，若为子串则按参照表条目输出，不为子串者原样输出并加提示。2.对加提示的条目手工修改。 代码演示： 1#fbs.py fatherStrBirthSonStr2#ande.stduio (c) 2019-06-17 21:50:0834import numpy as np56std &#x3D; np.loadtxt(&quot;0.csv&quot;, delimiter&#x3D;&quot;,&quot;, usecols&#x3D;(1), dtype&#x3D;str, skiprows&#x3D;1, unpack&#x3D;True, encoding&#x3D;&#39;utf8&#39;)#参照表7smp &#x3D; np.loadtxt(&quot;4.csv&quot;, delimiter&#x3D;&quot;,&quot;, usecols&#x3D;(0), dtype&#x3D;str, skiprows&#x3D;1, unpack&#x3D;True, encoding&#x3D;&#39;utf8&#39;)#样表89for i in range(len(smp)):10 print(smp[i], end&#x3D;&quot;\\t&quot;)11 for j in range(len(std)):12 if std[j].find(smp[i]) !&#x3D; -1:13 print(std[j], end&#x3D;&quot;&quot;)14 #else:15 #print(&#39;0\\t&#39; + smp[i])#此流程不可行，因第二遍历多数将进入此条件，取巧的办法是在第一遍历时就执行此流程，然后根据第二遍历真条件反筛选出假条件16 print() 运行结果：","categories":[{"name":"Python","slug":"Python","permalink":"http://www.cqh.ch/categories/Python/"}],"tags":[{"name":"算法","slug":"算法","permalink":"http://www.cqh.ch/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"炼金师的崛起","slug":"2018/alchemist","date":"2018-12-03T10:38:16.000Z","updated":"2019-12-25T03:59:59.488Z","comments":true,"path":"2018/alchemist.html","link":"","permalink":"http://www.cqh.ch/2018/alchemist.html","excerpt":"","text":"5年前的某天，当我还在医学院自学编程的时候，我无意中发现了可以跑赢余额宝的方法。当时余额宝的年利率在6.5%左右，如果我可以将我的想法变为现实的话，那我将获得一台年利率13%的赚钱机器。可我当时的能力实在是太low了，无法将心中所想构造出来。 时间来到2016年，当时我是某个小药企的检验员，国庆假期期间拜读了著名的[C程序设计语言]，我惊奇的发现自己编程能力有了很大的提高，我甚至写了个可以自动处理数据并生成报告的的程序以期提高工作效率，虽然最后失望地离开了公司。但在那里我遇到了一群炒股的同事，某日彭晓鲲和花蕊在谈论图表形态，我插嘴道如果用计算机取代人工去做计算和预测应该就可以改写韭菜命运吧。他们摇头说对散户来说太难。我没说我好像可以做出来…后来我才知道我的那种想法叫量化投资。 2017年下半年回到了医院，小县城慢节奏的工作与生活让我终于腾出了时间去做自己想做的。在追美剧[Billion]过程中，我发现资本Capital，量化Quant，对冲Hedge原来就是我的名字，我似乎找到了一种全新的方式定义自己。某日，骆玉芳问我有什么理想，我随口答道炼金术。她好心地劝我要实际点。又某日和刘燕论及生死，我说我希望自己能造一个机器人替我守护死后的世界，她说感觉很遥远。她们不知道的是，其实我说的是同一个东西。 2018年发生了很多事情，由生到死以及由死到生的过程漫长而痛苦。好在11月决定洗心革面，也重启了很多计划，其中最重要的就是这个炼金师的计划。早上6点，我戴着耳机沿着江边走道慢跑，在11月结束的时候，我听完了&lt;股票作手回忆录&gt;，&lt;大投机家&gt;，&lt;漫步华尔街&gt;。并且终于将5年前的想法算法化了。 Hello, Miss December, Capital of Quant and Hedge is coming!","categories":[{"name":"理财","slug":"理财","permalink":"http://www.cqh.ch/categories/%E7%90%86%E8%B4%A2/"}],"tags":[{"name":"量化","slug":"量化","permalink":"http://www.cqh.ch/tags/%E9%87%8F%E5%8C%96/"},{"name":"投资","slug":"投资","permalink":"http://www.cqh.ch/tags/%E6%8A%95%E8%B5%84/"}]},{"title":"用日历管理课程表","slug":"2012/school-timetable","date":"2012-09-06T11:29:54.000Z","updated":"2020-01-01T13:29:17.591Z","comments":true,"path":"2012/school-timetable.html","link":"","permalink":"http://www.cqh.ch/2012/school-timetable.html","excerpt":"","text":"分享下我们班的电子版课表,首先感谢王老师的提供.为了便于日程管理,我制作了csv文件(为符合格式将12节设8:00,34节设10:00,56节设13:00,78节设15:00.默认没有提醒),导入google日历就可以用安卓手机查看了.如果手机无法添加google账户,可以用邮件功能添加exchange账户,将google的日历导入到qq日历里.我的google日历html地址,得登录google账户才能查看,不想麻烦的话直接导入自己账户就行了.强烈推荐大家使用日历日程来管理课程表.更便捷高效,有图有真相!桌面窗口部件: 周视图: 日程视图: 详情查看: 希望能帮到大家.","categories":[{"name":"个人管理","slug":"个人管理","permalink":"http://www.cqh.ch/categories/%E4%B8%AA%E4%BA%BA%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"日历","slug":"日历","permalink":"http://www.cqh.ch/tags/%E6%97%A5%E5%8E%86/"}]}]}